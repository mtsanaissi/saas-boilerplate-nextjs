{
  "$schema": "./tasks.schema.json",
  "version": 1,
  "tasks": [
    {
      "id": "T-031",
      "title": "Harden auth rate-limit failure handling",
      "description": "Use structured logging for rate-limit failures and ensure auth flows fail safely when rate-limit checks are unavailable. Add tests around the rate-limit failure path and configured behavior.",
      "status": "pending",
      "createdAt": "2026-01-05",
      "completedAt": null,
      "acceptanceCriteria": [
        {
          "text": "Rate-limit errors are logged with the structured logger and request context",
          "done": false
        },
        {
          "text": "Auth flows fail safe on rate-limit service errors (configurable allow/deny)",
          "done": false
        },
        {
          "text": "User-facing errors remain localized and stable",
          "done": false
        },
        {
          "text": "Tests cover rate-limit service failure path (non-rate_limited error) and verify the configured allow/deny behavior",
          "done": false
        }
      ]
    },
    {
      "id": "T-032",
      "title": "Add tests for Stripe webhook + usage API",
      "description": "Expand test coverage for webhook handling, usage consumption, and rate-limiting edge cases. Use fixtures for Stripe payloads and minimize mocking to API boundaries only.",
      "status": "pending",
      "createdAt": "2026-01-05",
      "completedAt": null,
      "acceptanceCriteria": [
        {
          "text": "Stripe webhook handler tests cover event idempotency and subscription updates",
          "done": false
        },
        {
          "text": "Usage consume API tests cover limit exceeded and invalid payloads",
          "done": false
        },
        {
          "text": "Rate-limit behavior is tested for at least one auth or API route",
          "done": false
        },
        {
          "text": "Stripe webhook tests use real event fixtures and assert DB writes/updates via Supabase admin client",
          "done": false
        }
      ]
    },
    {
      "id": "T-033",
      "title": "Account deletion + data export",
      "description": "Add user-facing flows for account deletion and data export, with server actions and audit logging. Add tests for export contents and deletion side effects using local Supabase.",
      "status": "pending",
      "createdAt": "2026-01-05",
      "completedAt": null,
      "acceptanceCriteria": [
        {
          "text": "Users can request account deletion and confirm via a gated flow",
          "done": false
        },
        {
          "text": "A data export endpoint provides a user-owned archive of profile, billing, and usage data",
          "done": false
        },
        {
          "text": "Deletion and export events are recorded in audit logs",
          "done": false
        },
        {
          "text": "Tests verify export includes profile, billing, and usage sections for the requesting user",
          "done": false
        },
        {
          "text": "Tests verify deletion clears or anonymizes user data and records an audit log entry",
          "done": false
        }
      ]
    },
    {
      "id": "T-034",
      "title": "Email change flow",
      "description": "Provide a secure email change flow with verification and localized UI messaging. Add tests for the request and confirmation paths.",
      "status": "pending",
      "createdAt": "2026-01-05",
      "completedAt": null,
      "acceptanceCriteria": [
        {
          "text": "Users can request an email change and confirm via Supabase verification",
          "done": false
        },
        {
          "text": "Audit logs capture email change requests and completions",
          "done": false
        },
        {
          "text": "UI shows clear success and error states using i18n keys",
          "done": false
        },
        {
          "text": "Tests cover email change request action and confirmation callback behavior",
          "done": false
        }
      ]
    },
    {
      "id": "T-035",
      "title": "Security hardening: email verification + MFA",
      "description": "Add email-verified enforcement on protected routes and an optional MFA setup flow. Add tests for verification gating and MFA enrollment state transitions.",
      "status": "pending",
      "createdAt": "2026-01-05",
      "completedAt": null,
      "acceptanceCriteria": [
        {
          "text": "Protected areas can require verified email addresses with a clear redirect path",
          "done": false
        },
        {
          "text": "MFA enrollment and verification UI flows are available (Supabase supported factors)",
          "done": false
        },
        {
          "text": "Audit logs record MFA changes and verification enforcement",
          "done": false
        },
        {
          "text": "Tests verify unverified users are redirected from protected routes with a stable error code",
          "done": false
        },
        {
          "text": "Tests cover MFA enrollment and revoke paths with audit logging",
          "done": false
        }
      ]
    },
    {
      "id": "T-036",
      "title": "Billing UX improvements",
      "description": "Add UI copy and states for plan changes, cancellations, grace periods, and renewal messaging. If status-to-copy mapping is extracted into a helper, add unit tests for the mapping.",
      "status": "pending",
      "createdAt": "2026-01-05",
      "completedAt": null,
      "acceptanceCriteria": [
        {
          "text": "Plan status states map to clear, localized messaging in dashboard/settings",
          "done": false
        },
        {
          "text": "Cancellation and grace period states are visible and easy to understand",
          "done": false
        },
        {
          "text": "Billing upgrade/downgrade paths include helpful guidance text",
          "done": false
        },
        {
          "text": "If a status-mapping helper is introduced, unit tests cover every PlanStatus value",
          "done": false
        }
      ]
    },
    {
      "id": "T-037",
      "title": "Env validation and feature flags",
      "description": "Add a typed env validation module and feature-flag helpers to reduce runtime config errors. Add unit tests for required/optional env parsing and flag defaults.",
      "status": "pending",
      "createdAt": "2026-01-05",
      "completedAt": null,
      "acceptanceCriteria": [
        {
          "text": "Required env vars are validated on boot with clear error messages",
          "done": false
        },
        {
          "text": "Feature flags are available for optional flows (billing, analytics, etc.)",
          "done": false
        },
        {
          "text": "README documents env validation and flags",
          "done": false
        },
        {
          "text": "Unit tests verify missing required envs throw and optional flags default correctly",
          "done": false
        }
      ]
    },
    {
      "id": "T-038",
      "title": "Health endpoint + error boundaries",
      "description": "Add basic operational endpoints and error boundaries for runtime resilience. Add a route test for the health endpoint response.",
      "status": "pending",
      "createdAt": "2026-01-05",
      "completedAt": null,
      "acceptanceCriteria": [
        {
          "text": "Health check route returns service status and dependency checks",
          "done": false
        },
        {
          "text": "app/error.tsx and app/not-found.tsx provide localized fallback UI",
          "done": false
        },
        {
          "text": "Errors are logged with request IDs where available",
          "done": false
        },
        {
          "text": "Health endpoint test asserts status code and JSON payload shape",
          "done": false
        }
      ]
    },
    {
      "id": "T-039",
      "title": "Seed and reset scripts for local dev",
      "description": "Add scripts to seed demo data and reset local Supabase state for faster onboarding. Include a dry-run mode and a smoke test that exercises it.",
      "status": "pending",
      "createdAt": "2026-01-05",
      "completedAt": null,
      "acceptanceCriteria": [
        {
          "text": "A script seeds demo users, billing, and usage data in local Supabase",
          "done": false
        },
        {
          "text": "A reset script restores local DB to a clean state",
          "done": false
        },
        {
          "text": "README documents how to run seed/reset scripts",
          "done": false
        },
        {
          "text": "Dry-run mode produces a non-destructive plan and a smoke test asserts it exits successfully",
          "done": false
        }
      ]
    },
    {
      "id": "T-001",
      "title": "Localize user-facing errors via error codes",
      "description": "Replace direct decodeURIComponent/error-string rendering with error-code to t(\"errors.*\") mapping so all user-visible messages are fully localizable.",
      "status": "done",
      "createdAt": "2025-12-03",
      "completedAt": "2025-12-29",
      "acceptanceCriteria": [
        {
          "text": "UI never renders raw provider error strings to users",
          "done": true
        },
        {
          "text": "Errors map from stable error codes to `t(\"errors.*\")` keys",
          "done": true
        },
        {
          "text": "Unknown errors have a localized fallback message",
          "done": true
        }
      ]
    },
    {
      "id": "T-002",
      "title": "Forms + alerts accessibility pass",
      "description": "Enhance form and alert accessibility with aria-invalid, aria-describedby, role=alert/status, aria-live regions, and clear button vs link semantics.",
      "status": "done",
      "createdAt": "2025-12-03",
      "completedAt": "2025-12-29",
      "acceptanceCriteria": [
        {
          "text": "Invalid fields set `aria-invalid` and link errors via `aria-describedby`",
          "done": true
        },
        {
          "text": "Alerts use appropriate roles (`alert`/`status`) and `aria-live` where needed",
          "done": true
        },
        {
          "text": "Button vs link semantics match behavior (no fake links/buttons)",
          "done": true
        }
      ]
    },
    {
      "id": "T-003",
      "title": "WCAG focus/contrast + theme tokens",
      "description": "Improve focus indicators, color contrast, and Tailwind/DaisyUI theme tokens to meet WCAG AA, including dark mode and prefers-reduced-motion handling.",
      "status": "done",
      "createdAt": "2025-12-03",
      "completedAt": "2025-12-29",
      "acceptanceCriteria": [
        {
          "text": "Visible focus styles for all interactive elements (keyboard)",
          "done": true
        },
        {
          "text": "Theme tokens support light/dark and meet contrast targets where applicable",
          "done": true
        },
        {
          "text": "Motion respects `prefers-reduced-motion` for relevant animations/transitions",
          "done": true
        }
      ]
    },
    {
      "id": "T-004",
      "title": "Accessibility landmarks + skip link + headings",
      "description": "Update layout and pages for accessibility landmarks, including header/nav/main/footer roles, a skip-to-content link, and consistent heading hierarchy.",
      "status": "done",
      "createdAt": "2025-12-03",
      "completedAt": "2025-12-29",
      "acceptanceCriteria": [
        {
          "text": "Pages include clear landmarks (`header`, `nav`, `main`, `footer`)",
          "done": true
        },
        {
          "text": "A skip-to-content link exists and works with keyboard navigation",
          "done": true
        },
        {
          "text": "Heading hierarchy is consistent (single `h1`, no skipped levels)",
          "done": true
        }
      ]
    },
    {
      "id": "T-008",
      "title": "Introduce typed i18n with /:locale routing",
      "description": "Introduce an i18n library with /:locale routing and a typed message catalog, and move existing text (home hero, auth, plans, alerts) into locale message files.",
      "status": "done",
      "createdAt": "2025-12-03",
      "completedAt": "2025-12-19",
      "acceptanceCriteria": [
        {
          "text": "Routes support `/:locale` with a defined default locale",
          "done": true
        },
        {
          "text": "Message catalog is typed and used across app UI",
          "done": true
        },
        {
          "text": "Existing user-facing text migrated to locale message files",
          "done": true
        }
      ]
    },
    {
      "id": "T-009",
      "title": "Add placeholder pages to validate UX tasks",
      "description": "Create a few simple placeholder pages/components (no real content) that exercise accessibility, focus/contrast, forms/alerts, and error handling so changes from the remaining tasks can be tested and validated in-app.",
      "status": "done",
      "createdAt": "2025-12-29",
      "completedAt": "2025-12-29",
      "acceptanceCriteria": [
        {
          "text": "At least 2â€“3 placeholder pages exist to exercise forms, alerts, and error states",
          "done": true
        },
        {
          "text": "Pages are reachable via an obvious navigation entry (e.g., a dev-only link)",
          "done": true
        },
        {
          "text": "Pages include representative UI elements to validate focus styles and contrast",
          "done": true
        }
      ]
    },
    {
      "id": "T-010",
      "title": "Create minimal Supabase billing schema (single-user)",
      "description": "Add migrations for core billing tables and RLS policies so subscription state can be stored and read for single-user accounts.",
      "status": "done",
      "createdAt": "2025-12-30",
      "completedAt": "2025-12-30",
      "acceptanceCriteria": [
        {
          "text": "Tables exist for profiles, billing_customers, billing_subscriptions, and stripe_events",
          "done": true
        },
        {
          "text": "RLS allows users to read their own billing data but restricts writes to service role only",
          "done": true
        },
        {
          "text": "Schema includes indexes/constraints for unique Stripe IDs and event deduplication",
          "done": true
        }
      ]
    },
    {
      "id": "T-011",
      "title": "Persist Stripe webhook events for subscription state",
      "description": "Extend the Stripe webhook handler to upsert subscription state for a single-user account and guard against duplicate processing.",
      "status": "done",
      "createdAt": "2025-12-30",
      "completedAt": "2025-12-30",
      "acceptanceCriteria": [
        {
          "text": "Webhook verifies signatures in production and supports a safe local dev mode",
          "done": true
        },
        {
          "text": "Subscription state is upserted by user (status, price, period end, cancel-at-period-end)",
          "done": true
        },
        {
          "text": "Idempotency is enforced using Stripe event IDs",
          "done": true
        }
      ]
    },
    {
      "id": "T-012",
      "title": "Local Stripe mock + webhook dev setup",
      "description": "Add a local Stripe emulator workflow (stripe-mock or localstripe) with env toggles and README guidance so subscriptions + webhooks can be exercised without a real Stripe account.",
      "status": "done",
      "createdAt": "2025-12-30",
      "completedAt": "2025-12-30",
      "acceptanceCriteria": [
        {
          "text": "Local mock instructions exist (how to start, which env vars to set, and any limitations vs real Stripe)",
          "done": true
        },
        {
          "text": "App can run in mock mode without real Stripe keys (dummy keys accepted)",
          "done": true
        },
        {
          "text": "Webhook flow can be triggered locally (documented example or helper route/script)",
          "done": true
        }
      ]
    },
    {
      "id": "T-013",
      "title": "Account recovery + verification flows",
      "description": "Add password reset, email verification/resend, and magic-link sign-in flows with localized UI and secure server actions.",
      "status": "done",
      "createdAt": "2025-12-30",
      "completedAt": "2025-12-30",
      "acceptanceCriteria": [
        {
          "text": "Password reset request + confirm pages exist with Supabase email flow wired up",
          "done": true
        },
        {
          "text": "Email verification/resend flow is available after registration",
          "done": true
        },
        {
          "text": "All messages use i18n keys and server actions return localized error codes",
          "done": true
        }
      ]
    },
    {
      "id": "T-014",
      "title": "User profile settings",
      "description": "Create a profile/settings area that lets users update profile fields and locale preferences stored in `profiles`.",
      "status": "done",
      "createdAt": "2025-12-30",
      "completedAt": "2025-12-30",
      "acceptanceCriteria": [
        {
          "text": "Settings page allows editing display name, avatar URL, and locale with validation",
          "done": true
        },
        {
          "text": "Profile updates use Supabase RLS-safe update paths and refresh in the UI",
          "done": true
        },
        {
          "text": "Dashboard reflects profile data (name + current locale) instead of placeholders",
          "done": true
        }
      ]
    },
    {
      "id": "T-015",
      "title": "Authorization + feature gating",
      "description": "Introduce centralized authorization helpers and server-side checks for protected routes and plan-based feature access (single-user, no orgs).",
      "status": "done",
      "createdAt": "2025-12-30",
      "completedAt": "2025-12-30",
      "acceptanceCriteria": [
        {
          "text": "Reusable auth guard utilities exist for RSCs, server actions, and API routes",
          "done": true
        },
        {
          "text": "Plan/feature checks are enforced server-side (not just in UI)",
          "done": true
        },
        {
          "text": "Denied access yields localized error UI or redirect paths",
          "done": true
        }
      ]
    },
    {
      "id": "T-016",
      "title": "Usage tracking + credits foundation",
      "description": "Add schema + server utilities to record usage events and enforce per-plan limits or credits.",
      "status": "done",
      "createdAt": "2025-12-30",
      "completedAt": "2025-12-30",
      "acceptanceCriteria": [
        {
          "text": "Database tables exist for usage events and balances (per user)",
          "done": true
        },
        {
          "text": "Server utilities record usage and check remaining allowance/credits",
          "done": true
        },
        {
          "text": "Limit exhaustion returns localized errors and blocks new usage",
          "done": true
        }
      ]
    },
    {
      "id": "T-017",
      "title": "Rate limiting + abuse protections",
      "description": "Add per-user and per-IP rate limiting for auth and API endpoints with clear error handling.",
      "status": "done",
      "createdAt": "2025-12-30",
      "completedAt": "2025-12-31",
      "acceptanceCriteria": [
        {
          "text": "Rate limiting applies to auth and critical API routes",
          "done": true
        },
        {
          "text": "Limits are configurable via env or config, with sensible defaults",
          "done": true
        },
        {
          "text": "Throttled responses return localized user-facing messages",
          "done": true
        }
      ]
    },
    {
      "id": "T-018",
      "title": "Billing management + plan status UI",
      "description": "Integrate Stripe Customer Portal and reflect live subscription status in the dashboard and settings.",
      "status": "done",
      "createdAt": "2025-12-30",
      "completedAt": "2025-12-31",
      "acceptanceCriteria": [
        {
          "text": "Customer Portal link/button works for authenticated users",
          "done": true
        },
        {
          "text": "Dashboard shows current plan, status, and renewal date from billing tables",
          "done": true
        },
        {
          "text": "Upgrade/downgrade/cancel flows update UI after webhook sync",
          "done": true
        }
      ]
    },
    {
      "id": "T-019",
      "title": "Observability baseline",
      "description": "Add structured logging, error monitoring hooks, and minimal product analytics with environment toggles.",
      "status": "done",
      "createdAt": "2025-12-30",
      "completedAt": "2025-12-31",
      "acceptanceCriteria": [
        {
          "text": "Server logs are structured and include request correlation IDs",
          "done": true
        },
        {
          "text": "Unhandled errors report to a configured monitoring provider",
          "done": true
        },
        {
          "text": "Basic analytics event tracking is available with opt-out toggle",
          "done": true
        }
      ]
    },
    {
      "id": "T-020",
      "title": "Security + compliance essentials",
      "description": "Add audit logging, session/device management, and legal/consent pages appropriate for SaaS.",
      "status": "done",
      "createdAt": "2025-12-30",
      "completedAt": "2025-12-31",
      "acceptanceCriteria": [
        {
          "text": "Audit log table exists with server helpers to append security-relevant events",
          "done": true
        },
        {
          "text": "Users can view active sessions/devices and revoke sessions",
          "done": true
        },
        {
          "text": "Privacy Policy + Terms pages exist and consent settings are respected",
          "done": true
        }
      ]
    },
    {
      "id": "T-021",
      "title": "Testing + CI setup",
      "description": "Introduce unit/integration tests and a CI workflow for lint, typecheck, and tests.",
      "status": "done",
      "createdAt": "2025-12-30",
      "completedAt": "2025-12-31",
      "acceptanceCriteria": [
        {
          "text": "Test runner configured with at least a smoke test for auth + billing flows",
          "done": true
        },
        {
          "text": "CI workflow runs lint, typecheck, and tests on pull requests",
          "done": true
        },
        {
          "text": "README documents how to run tests locally",
          "done": true
        }
      ]
    },
    {
      "id": "T-022",
      "title": "Usage UI summary card",
      "description": "Add a dashboard/settings UI surface that shows current period usage, remaining credits, and reset date.",
      "status": "done",
      "createdAt": "2025-12-30",
      "completedAt": "2025-12-30",
      "acceptanceCriteria": [
        {
          "text": "Dashboard shows credits used/remaining for the current billing period",
          "done": true
        },
        {
          "text": "UI uses localized labels and formats dates consistently",
          "done": true
        },
        {
          "text": "Free vs paid plan messaging is clear (limit or unlimited if applicable)",
          "done": true
        }
      ]
    },
    {
      "id": "T-023",
      "title": "Usage details page",
      "description": "Create a dedicated usage page listing recent usage events and credits balance history.",
      "status": "done",
      "createdAt": "2025-12-30",
      "completedAt": "2025-12-30",
      "acceptanceCriteria": [
        {
          "text": "Usage page lists recent events with feature name, amount, and timestamp",
          "done": true
        },
        {
          "text": "Balance section shows current period totals and reset date",
          "done": true
        },
        {
          "text": "Page is gated to authenticated users and handles empty states",
          "done": true
        }
      ]
    },
    {
      "id": "T-024",
      "title": "Logging levels + env switch",
      "description": "Add debug-level logging support with an environment-configurable log level that gates verbose output.",
      "status": "done",
      "createdAt": "2025-12-31",
      "completedAt": "2025-12-31",
      "acceptanceCriteria": [
        {
          "text": "Logger supports debug/info/warn/error levels with a single log-level env switch",
          "done": true
        },
        {
          "text": "Debug logs are suppressed unless LOG_LEVEL=debug is set",
          "done": true
        },
        {
          "text": "README or AGENTS.md documents logging usage and env control",
          "done": true
        }
      ]
    },
    {
      "id": "T-025",
      "title": "Full UI copy localization audit",
      "description": "Audit all user-facing UI text and error messages to ensure every string is localized via next-intl (no hardcoded literals in components or client-side code).",
      "status": "done",
      "createdAt": "2026-01-05",
      "completedAt": "2026-01-05",
      "acceptanceCriteria": [
        {
          "text": "All user-facing UI text is sourced from next-intl message keys",
          "done": true
        },
        {
          "text": "No hardcoded literal strings remain in components or client-side code, including error messages",
          "done": true
        },
        {
          "text": "Locale message files include any newly added keys with consistent naming",
          "done": true
        }
      ]
    },
    {
      "id": "T-026",
      "title": "Session tracking on auth + proxy",
      "description": "Upsert user session records on sign-in/auth callback and during request lifecycle so session/device lists are reliable outside the settings page.",
      "status": "done",
      "createdAt": "2026-01-05",
      "completedAt": "2026-01-05",
      "acceptanceCriteria": [
        {
          "text": "A server helper writes/updates user_sessions using the authenticated session and updates last_seen_at",
          "done": true
        },
        {
          "text": "Auth callback or proxy flow invokes session tracking so active sessions appear without visiting settings",
          "done": true
        },
        {
          "text": "Session tracking avoids noisy logs and handles missing session IDs safely",
          "done": true
        }
      ]
    },
    {
      "id": "T-027",
      "title": "Session list reliability + revocation behavior",
      "description": "Ensure session list and revoke actions stay consistent by handling current-session identification, stale entries, and empty states gracefully.",
      "status": "done",
      "createdAt": "2026-01-05",
      "completedAt": "2026-01-05",
      "acceptanceCriteria": [
        {
          "text": "Current session is consistently identified in the UI when an access token is available",
          "done": true
        },
        {
          "text": "Revoking other sessions deletes or marks sessions deterministically even when the current session ID is missing",
          "done": true
        },
        {
          "text": "Optional: stale sessions are pruned or visually flagged using last_seen_at",
          "done": true
        }
      ]
    },
    {
      "id": "T-028",
      "title": "Atomic usage consumption RPC",
      "description": "Add a Postgres function to atomically check limits, update usage_balances, and insert usage_events in a single transaction. Include an integration test against local Supabase that exercises the RPC with real tables (no Supabase client mocks).",
      "status": "done",
      "createdAt": "2026-01-05",
      "completedAt": "2026-01-05",
      "acceptanceCriteria": [
        {
          "text": "A SQL function performs balance upsert + event insert atomically and returns updated allowance",
          "done": true
        },
        {
          "text": "Function guards against negative or zero amounts and returns a stable error for limit exceeded",
          "done": true
        },
        {
          "text": "RLS/permissions allow service-role invocation only as required",
          "done": true
        },
        {
          "text": "Integration test asserts the RPC increments usage_balances and inserts a usage_events row in the same call",
          "done": true
        },
        {
          "text": "Integration test covers limit-exceeded behavior returning the expected error signal",
          "done": true
        }
      ]
    },
    {
      "id": "T-029",
      "title": "Use atomic usage consumption in server API",
      "description": "Update usage server utilities and API routes to call the atomic usage RPC and map errors to existing error codes. Add route tests that stub only the RPC boundary (not internal logic).",
      "status": "done",
      "createdAt": "2026-01-05",
      "completedAt": "2026-01-06",
      "acceptanceCriteria": [
        {
          "text": "consumeUsage/consumeUsageOrThrow use the new RPC instead of separate writes",
          "done": true
        },
        {
          "text": "API errors remain stable (usage_limit_exceeded, invalid_request, server_error)",
          "done": true
        },
        {
          "text": "Tests verify the API returns 403 on usage_limit_exceeded and 400 on invalid payload",
          "done": true
        },
        {
          "text": "Tests cover concurrency/limit behavior or include a regression test for double-spend",
          "done": true
        }
      ]
    },
    {
      "id": "T-030",
      "title": "Reuse Stripe customers in Checkout",
      "description": "Attach existing billing_customers to Stripe Checkout sessions so users are not duplicated as new Stripe customers. Add a unit test that asserts the Stripe session creation call includes `customer` when a stripe_customer_id exists.",
      "status": "done",
      "createdAt": "2026-01-05",
      "completedAt": "2026-01-06",
      "acceptanceCriteria": [
        {
          "text": "Checkout uses existing stripe_customer_id when available",
          "done": true
        },
        {
          "text": "Fallback behavior preserves current flow for users without a customer record",
          "done": true
        },
        {
          "text": "Audit/logging remains unchanged or is minimally updated to avoid noise",
          "done": true
        },
        {
          "text": "Test asserts Stripe checkout params include `customer` for existing billing_customers and do not break anonymous fallback",
          "done": true
        }
      ]
    }
  ]
}
